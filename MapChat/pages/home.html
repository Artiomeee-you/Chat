<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>MapChat — Главная</title>

  <!-- Общие стили -->
  <link rel="stylesheet" href="../css/style.css"/>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>

  <style>
    :root {
      --primary:   #4f46e5;
      --bg-light:  #fafafa;
      --text-light:#333;
      --bg-dark:   #2a2a3d;
      --text-dark: #eee;
    }
    * { box-sizing: border-box; margin:0; padding:0 }
    html, body {
      width:100%; height:100%; overflow:hidden;
      font-family:'Segoe UI',sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
      transition: background .3s, color .3s;
    }
    body.dark-theme {
      background: var(--bg-dark);
      color: var(--text-dark);
    }

    /* контейнер трёх экранов: учитываем шапку сверху (60px) и панель снизу (60px) */
    .screens {
      position: absolute;
      top: 60px;
      bottom: 60px;
      left: 0; right: 0;
      display: flex;
      width: 300vw;   /* 3 × 100vw */
      height: auto;
      transition: transform 0.3s ease;
      overflow: hidden;
    }
    section.screen {
      flex: 0 0 100vw;
      padding: 24px;
      overflow-y: auto;
      background: var(--bg-light);
    }
    body.dark-theme section.screen {
      background: var(--bg-dark);
    }

    /* заголовки */
    .screen h2 {
      margin: 0 0 16px;
      font-size: 1.5rem;
    }

    /* стили для «Спец. возможности» */
    .feature {
      display: flex; justify-content: space-between; align-items: center;
      padding:12px; margin-bottom:12px;
      background:#f0f0ff; border-radius:8px;
    }
    .badge {
      background: var(--primary); color:#fff;
      padding:4px 8px; border-radius:12px;
      font-size:.85rem;
    }
    .toggle {
      display:flex; background:#ddd;
      border-radius:8px; overflow:hidden;
    }
    .toggle-btn {
      flex:1; padding:8px; border:none; background:none;
      cursor:pointer; color:#333;
      transition:background .2s, color .2s;
    }
    .toggle-btn.active {
      background: var(--primary);
      color: #fff;
    }
    body.dark-theme .feature { background:#3a3a50 }
    body.dark-theme .toggle { background:#444 }
    body.dark-theme .toggle-btn { color:#eee }

    /* цветовые акценты */
    .color-options { display:flex; gap:8px; margin-top:8px }
    .color-square {
      width:24px; height:24px; border-radius:4px;
      cursor:pointer; border:2px solid transparent;
      transition: border-color .2s;
    }
    .color-square.selected {
      border-color:#000;
    }
    .light-green  { background:#6ee7b7 }
    .dark-green   { background:#047857 }
    .light-blue   { background:#93c5fd }
    .dark-blue    { background:#1e3a8a }
    .light-purple { background:#d8b4fe }
    .dark-purple  { background:#5b21b6 }

    /* карта */
    .map-container {
      width:100%;
      /* высота = 100vh − навигация (60px) − padding сверху/снизу (48px) */
      height: calc(100vh - 60px - 48px);
      position: relative;
    }
    .overlay {
      position:absolute; inset:0;
      display:flex; justify-content:center; align-items:center;
      z-index:2;
    }
    .overlay button {
      padding:14px 28px; font-size:1.1rem;
      border:none; border-radius:24px;
      background:var(--primary); color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.2);
      cursor:pointer;
      transition:background .2s;
    }

    /* профиль */
    #profile select,
    #profile input,
    #profile textarea {
      width:100%; margin-bottom:12px; padding:10px;
      border:1px solid #ddd; border-radius:8px;
      font-size:1rem;
    }
    body.dark-theme #profile select,
    body.dark-theme #profile input,
    body.dark-theme #profile textarea {
      background:#3a3a50; border-color:#555; color:#eee;
    }
    #saveProfile {
      display:block; width:100%; padding:12px;
      border:none; border-radius:8px;
      background:var(--primary); color:#fff;
      font-size:1rem; cursor:pointer;
      transition:background .2s, opacity .2s;
    }
    #saveProfile:disabled {
      opacity:.6; cursor:not-allowed;
    }

    .nav-buttons {
      position: fixed;
      bottom: 0; left: 0;
      width: 100%; height: 60px;
      display: flex;
      background: var(--bg-light);
      border-top: 1px solid #ddd;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
      z-index: 1001;
    }
    .nav-buttons button {
      flex: 1;
      border: none;
      background: none;
      font-size: 1rem;
      color: var(--text-light);
      cursor: pointer;
      transition: background .2s, color .2s;
      pointer-events: auto;
    }
    body.dark-theme .nav-buttons {
      background: var(--bg-dark);
      border-top-color: #444;
    }
    body.dark-theme .nav-buttons button {
      color: var(--text-dark);
    }
    .nav-buttons button.active {
      background: var(--primary);
      color: #fff;
    }
    .nav-buttons button:hover:not(.active) {
      background: rgba(0,0,0,0.05);
    }
    body.dark-theme .nav-buttons button:hover:not(.active) {
      background: rgba(255,255,255,0.05);
    }
  </style>
</head>
<body>
    <!-- шапка (опционально) -->
    <div id="header"></div>
  
    <!-- контейнер экранов -->
    <div class="screens" id="screens">
      <!-- 0: Спец. возможности -->
      <section class="screen" id="features">
        <h2>Специальные возможности</h2>
        <div class="feature">
            <span>Увеличение маркера</span>
            <span class="badge" id="markerBadge">0/1</span>
          </div>
          <div class="feature">
            <span>Добавление фото</span>
            <span class="badge" id="photoBadge">0/3</span>
          </div>
          
        <div class="feature">
          <span>Тема приложения</span>
          <div class="toggle">
            <button id="lightMode" class="toggle-btn active">Светлая</button>
            <button id="darkMode"  class="toggle-btn">Тёмная</button>
          </div>
        </div>
        <div class="feature">
          <span>Цветовые акценты</span>
          <div class="color-options">
            <div class="color-square light-green selected" data-color="#6ee7b7"></div>
            <div class="color-square dark-green"            data-color="#047857"></div>
            <div class="color-square light-blue"            data-color="#93c5fd"></div>
            <div class="color-square dark-blue"             data-color="#1e3a8a"></div>
            <div class="color-square light-purple"          data-color="#d8b4fe"></div>
            <div class="color-square dark-purple"           data-color="#5b21b6"></div>
          </div>
        </div>
        <div class="feature">
            <span>Размер маркера</span>
            <input id="markerSizeInput" type="range" min="5" max="30" value="8"/>
            <span id="markerSizeLabel">8</span>px
          </div>
      </section>
      
      <!-- 1: Карта -->
      <section class="screen" id="welcome">
        
        <h2>Карта</h2>
    <div class="map-container">
      <div id="map"></div>
      <div class="overlay">
        <button id="toMap">Открыть карту</button>
      </div>
      <div id="chatOverlay" class="chat-overlay"></div>
    </div>
   </section>
  
      <!-- 2: Профиль -->
      <section class="screen" id="profile">
        <h2>Ваш профиль</h2>
        <select id="gender">
          <option value="male">Мужской</option>
          <option value="female">Женский</option>
          <option value="other">Другое</option>
        </select>
        <div class="feature">
            <span>Добавление фото</span>
            <input id="photoInput" type="file" accept="image/*"/>
            <span class="badge">0/3</span>
          </div>
          <div id="incoming"></div>
          <div id="chat"></div>

          <button id="toggleBlocked" class="feature">
                 <span>Заблокированные пользователи</span>
                </button>
            
                <!-- выдвигающаяся панель -->
                <div id="blockedPanel" class="slide-panel">
                  <h3>Заблокированные пользователи</h3>
                  <ul id="blockedList"></ul>
                  <button id="closeBlocked">Закрыть</button>
                </div>

        <input  id="age"      type="number" placeholder="Возраст"/>
        <input  id="username" type="text"   placeholder="Имя"/>
        <textarea id="message" placeholder="Что вы хотите сказать..."></textarea>
        <button id="saveProfile">Сохранить</button>
      </section>
    </div>
    <nav class="nav-buttons">
        <button id="btnFeatures" data-index="0" class="active">Возможности</button>
        <button id="btnMap"      data-index="1">Карта</button>
        <button id="btnProfile"  data-index="2">Профиль</button>
      </nav>
  
    <div id="footer"></div>
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <!-- Основная логика -->
  <script type="module" src="../js/home.js"></script>
  
</body>
</html>
  